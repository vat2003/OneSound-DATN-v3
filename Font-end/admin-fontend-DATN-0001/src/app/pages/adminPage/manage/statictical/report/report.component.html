<!-- Form Start -->
<div class="container-fluid pt-4 px-4">
  <div class="row g-4">


    <div class="col-sm-12 col-xl-12 row">

      <div class="bg-secondary rounded h-100 p-4">
        <!-- ---Bat dau thiet ke-- -->
        <div class="col-md-4">
          <h1>User statistics</h1>
        </div>
        <!-- <div class=" row">

          <div class="col-md-4">
            <input type="date" name="date" [(ngModel)]="date" (keyup)="dateAlert()"
              class="form-control mb-4 border-light border-2" style="border-radius: 20px" placeholder="Date" />
          </div>
          <div class="col-md-4">
            <select class="bg-dark form-control mb-4 border-light border-2" style="border-radius: 20px" name="" id="">
              <option value="">loc men</option>
              <option value="">loc men</option>
              <option value="">loc men</option>
            </select>

          </div>
        </div> -->
        <!-- ---Bat dau thiet-- -->
        <!-- <input type="text" class="form-control mb-4 border-light border-2" style="border-radius: 20px"
          placeholder="Search" /> -->
        <h6 class="mb-4">USER LIST</h6>

        <div class="d-flex justify-content-center">
          <div class="col-md-2 me-5">
            <input type="date" name="date" [(ngModel)]="dateCountUser1" placeholder="Date"
                   class=" form-control form-control mb-4 border-light border-2 datepicker" style="border-radius: 20px"
                   [min]="minDate" [max]="maxDate">
          </div>

          <h2>---</h2>


          <div class="col-md-2 ms-5">
            <input type="date" name="date" [(ngModel)]="dateCountUser2" placeholder="Date"
                   class=" form-control form-control mb-4 border-light border-2 datepicker" style="border-radius: 20px"
                   [min]="minDate" [max]="maxDate">
          </div>

          <div>
            <button class="ms-5 border-light border-2 btn btn-outline-light rounded-pill"
                    (click)="getCountUserBetweenDate()">Search
            </button>
          </div>
        </div>


        <table class="table table-hover text-center ">
          <thead>
          <tr>
            <th>No.</th>
            <th (click)="sortByCreatedId()"> Quantity <i class="fas fa-sort"></i></th>
            <th (click)="sortByCreatedDate()"> Create Date <i class=" fas fa-sort"></i></th>
            <!-- <th scope="col">Fullname</th>
            <th scope="col">Email</th>
            <th scope="col">Birthday</th>
            <th scope="col">Gender</th>

            <th scope="col">Role</th>
            <th scope="col">Image</th>
            <th scope="col">Address</th>
            <th scope="col">Created Date</th>
            <th scope="col">Active</th> -->

          </tr>
          </thead>
          <tbody>
          <tr
            *ngFor="let item of countUser | paginate: { itemsPerPage: pageSize, currentPage: p,  id: 'CountUser' }, let i = index">
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ item.id }}</td>
            <td (click)="getAllUserByDate(item.createDate )">{{ item.createDate | date: 'dd/MM/yyyy' }}</td>
          </tr>
          </tbody>
        </table>
        <div class="text-center">
          <pagination-controls (pageChange)="p = $event" id="CountUser"></pagination-controls>
        </div>


        <div style="display: block;">
          <!-- <div>Line Chart</div>
          <canvas baseChart height="100px" [type]="'line'" [data]="lineChartData" [options]="lineChartOptions"
            [legend]="lineChartLegend">
          </canvas> -->
        </div>
        <!--
        <div style="display: block;">
          <div>Bar Chart</div>
          <div class="  col-md-2">
            <label for="floatingSelect">Year</label>
            <select class="form-select barYear" id="barYear" name="barYear" [(ngModel)]="barYear"
              aria-label="Floating label select example" (change)="randomize()">

            </select>
            <button mat-button mat-raised-button (click)="randomize()">change</button>

          </div>

          <canvas baseChart height="100px" [type]="'bar'" [data]="barChartData" [options]="BarChartOptions"
            [legend]="BarChartLegend">
          </canvas>



        </div> -->

        <!-- <canvas height="500px" width="1000px" baseChart [data]="barChartData" [options]="barChartOptions"
          [type]="barChartType" (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
        </canvas>

        <button mat-button mat-raised-button color="primary">
          Update
        </button> -->


        <h6 class="mb- mt-3">USER LIST BY CREATION DATE</h6>
        <div class="d-flex justify-content-around">
          <div class="col-md-2">
            <input type="date" name="date" [(ngModel)]="date" placeholder="Date" (change)="showDate()"
                   class=" form-control form-control mb-4 border-light border-2 datepicker" style="border-radius: 20px"
                   [min]="minDate" [max]="maxDate">
          </div>

          <div class="  col-md-2">
            <label for="floatingSelect">Day</label>
            <select class="form-select day" id="day" name="day" [(ngModel)]="day"
                    aria-label="Floating label select example" (change)="getUserByOption()">

            </select>

          </div>

          <div class="  col-md-2">
            <label for="floatingSelect">Month</label>
            <select class="form-select month" id="month" name="month" [(ngModel)]="month"
                    aria-label="Floating label select example" (change)="getUserByOption()">

            </select>

          </div>

          <div class="  col-md-2">
            <label for="floatingSelect">Year</label>
            <select class="form-select year" id="year" name="year" [(ngModel)]="year"
                    aria-label="Floating label select example" (change)="getUserByOption()">

            </select>

          </div>
        </div>

        <table class="table table-hover text-center ">
          <thead>
          <tr>
            <th>No.</th>
            <!-- <th (click)="sortByCreatedId()"> Quantity <i class="fas fa-sort"></i> </th>
            <th (click)="sortByCreatedDate()"> Create Date <i class=" fas fa-sort"></i></th> -->
            <th scope="col">Fullname</th>
            <th scope="col">Email</th>
            <th scope="col">Birthday</th>
            <th scope="col">Gender</th>

            <th scope="col">Role</th>
            <th scope="col">Created Date</th>
            <th scope="col">Active</th>

          </tr>
          </thead>
          <tbody *ngIf="check!=1;else mess">
          <tr
            *ngFor="let item of user | paginate: { itemsPerPage: pageSize, currentPage: pU,  id: 'UserId' }, let i = index">
            <th scope="row">{{ i + 1 }}</th>
            <!-- <td>{{ item.id }}</td>
            <td>{{ item.createDate | date: 'dd/MM/yyyy' }}</td> -->


            <td>{{ item.fullname }}</td>
            <td>{{ item.email }}</td>
            <td>{{ item.birthday| date: 'dd/MM/yyyy' }}</td>

            <td>{{ item.gender ? 'Male' : 'Female' }}</td>
            <td>{{ item.accountRole?.name }}</td>
            <td>{{ item.createdDate | date: 'dd/MM/yyyy' }}</td>
            <td>{{ item.active ? 'Acctive' : 'Inactive' }}</td>


          </tr>

          </tbody>
          <ng-template #mess>
            <tr>
              <td colspan="7">
                <p class="fs-4 text-center text-danger">{{ errorm }}</p>
              </td>
            </tr>
          </ng-template>
        </table>
        <div class="text-center" *ngIf="user.length > 0">
          <pagination-controls (pageChange)="pU = $event" id="UserId"></pagination-controls>
        </div>

        <div class="  col-md-2">
          <label for="floatingSelect">Year</label>
          <select class="form-select barYear" id="barYear" name="barYear" [(ngModel)]="barYear"
                  aria-label="Floating label select example" (change)="changeUserData()">

          </select>


        </div>


        <app-bar-chart [userData]="countUserOrderByMonth"></app-bar-chart>

      </div>
    </div>


  </div>


</div>
<!-- Form End -->
